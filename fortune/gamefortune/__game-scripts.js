var Controller=pc.createScript("controller");Controller.attributes.add("TitleScreen",{type:"entity"}),Controller.attributes.add("Instrutional",{type:"entity"}),Controller.attributes.add("Countdown",{type:"entity"}),Controller.attributes.add("Gameplay",{type:"entity"}),Controller.attributes.add("PopUp",{type:"entity"}),Controller.attributes.add("StartButton",{type:"entity"}),Controller.attributes.add("ResetA",{type:"entity"}),Controller.attributes.add("ResetB",{type:"entity"}),Controller.attributes.add("endButton",{type:"entity"}),Controller.attributes.add("EntityCreator",{type:"entity"}),Controller.attributes.add("CardControl",{type:"entity"}),Controller.attributes.add("Win",{type:"entity"}),Controller.attributes.add("Lose",{type:"entity"}),Controller.attributes.add("End",{type:"entity"}),Controller.attributes.add("VideoPlane",{type:"entity"}),Controller.attributes.add("level",{type:"number",default:0}),Controller.attributes.add("openVideo",{type:"boolean",default:!1}),Controller.attributes.add("ResetItems",{type:"entity",array:!0}),Controller.attributes.add("winSprites",{type:"entity",array:!0}),Controller.attributes.add("weekSprites",{type:"entity",array:!0}),Controller.attributes.add("winDialogue",{type:"entity"}),Controller.attributes.add("weekDialogue",{type:"entity"}),Controller.prototype.initialize=function(){this.StartButton.button.on("click",this._onClick,this),this.ResetA.button.on("click",this._onReset,this),this.progress=this.HandleData(),this.currentLevel=0,this.disableWinItems()},Controller.prototype.HandleData=function(){var t,e=localStorage.getItem("playerLevel");return null===e?(t=[0,10,10,10,10,10,10,10],localStorage.setItem("playerLevel",t),t):t=JSON.parse("["+e+"]")},Controller.prototype.saveData=function(t){localStorage.setItem("playerLevel",t)},Controller.prototype.writeStatus=function(t,e){if(this.progress[t]<e){var r=e-this.progress[t];this.progress[t]=e;try{parent.addStars(r,t)}catch(t){}}t<24?this.progress[t+1]=0:this.progress[t]=e,this.saveData(this.progress)},Controller.prototype.disableStatus=function(t,e){this.progress[t]=-e;try{parent.addStars(e,t)}catch(r){}if(26!==t)if(27!==t)if(28!==t){for(var r=0;r<5;r++)10===this.progress[t-25+r]?this.progress[t-25+r]=-this.progress[t-25+r]:0===this.progress[t-25+r]?this.progress[t-25+r]=this.progress[t-25+r]-10:this.progress[t-25+r]>101?this.progress[t-25+r]=-10:this.progress[t-25+r]=-1*this.progress[t-25+r];this.saveData(this.progress)}else{for(var s=0;s<5;s++)10===this.progress[t-13+s]?this.progress[t-13+s]=-this.progress[t-13+s]:0===this.progress[t-13+s]?this.progress[t-13+s]=this.progress[t-13+s]-10:this.progress[t-13+s]>101?this.progress[t-13+s]=-10:this.progress[t-13+s]=-1*this.progress[t-13+s];this.saveData(this.progress)}else{for(var i=0;i<5;i++)10===this.progress[t-17+i]?this.progress[t-17+i]=-this.progress[t-17+i]:0===this.progress[t-17+i]?this.progress[t-17+i]=this.progress[t-17+i]-10:this.progress[t-17+i]>101?this.progress[t-17+i]=-10:this.progress[t-17+i]=-1*this.progress[t-17+i];this.saveData(this.progress)}else{for(var o=0;o<5;o++)10===this.progress[t-21+o]?this.progress[t-21+o]=-this.progress[t-21+o]:0===this.progress[t-21+o]?this.progress[t-21+o]=this.progress[t-21+o]-10:this.progress[t-21+o]>101?this.progress[t-21+o]=-10:this.progress[t-21+o]=-1*this.progress[t-21+o];this.saveData(this.progress)}},Controller.prototype.getTileStatus=function(t){try{return this.progress[t]}catch(t){return 0}},Controller.prototype.openQuitMenu=function(t){this.openVideo=t,this.EntityCreator.script.entityCreator.isPlaying=!1,this.End.enabled=!0,this.End.setLocalScale(new pc.Vec3(0,0,0)),this.End.tween(this.End.getLocalScale()).to(new pc.Vec3(1,1,1),.3,pc.SineOut).start(),this.VideoPlane.script.videoTexture.hide()},Controller.prototype.closeQuitMenu=function(){this.End.tween(this.End.getLocalScale()).to(new pc.Vec3(0,0,0),.3,pc.SineOut).start(),this.EntityCreator.script.entityCreator.isPlaying=!0,this.End.enabled=!1,this.openVideo&&(this.VideoPlane.script.videoTexture.show(),this.openVideo=!1)},Controller.prototype.resetGame=function(){this._onResetLose(),this.Instrutional.enabled=!1,this.PopUp.enabled=!1;for(var t=this.app.root.findByTag("tile"),e=0;e<t.length;e++)t[e].script.tileState.refresh();for(var r=0;r<this.ResetItems.length;r++)this.ResetItems[r].enabled=!1},Controller.prototype.resetGamePoints=function(){localStorage.setItem("playerLevel",[0,10,10,10,10,10,10,10]);for(var t=this.app.root.findByTag("tile"),e=0;e<t.length;e++)t[e].script.tileState.refresh();for(var r=0;r<this.ResetItems.length;r++)this.ResetItems[r].enabled=!1;try{parent.ResetGame()}catch(t){}},Controller.prototype._onClick=function(t){this.TitleScreen.enabled=!1,this.Instrutional.enabled=!1,this.Countdown.enabled=!1,this.Gameplay.enabled=!0,this.EntityCreator.script.entityCreator.entity.enabled=!0,this.EntityCreator.script.entityCreator.isPlaying=!0,this.EntityCreator.script.entityCreator.begin(t),this.EntityCreator.script.entityCreator.shouldPlay=!0},Controller.prototype._onReset=function(){this.TitleScreen.enabled=!0,this.Instrutional.enabled=!1,this.Countdown.enabled=!1,this.parseLevel(this.level),this.Gameplay.enabled=!0,this.Win.enabled=!1,this.Lose.enabled=!1,this.End.enabled=!1},Controller.prototype._onResetLose=function(){this.TitleScreen.enabled=!0,this.Instrutional.enabled=!1,this.Countdown.enabled=!1,this.EntityCreator.script.entityCreator.reset(0),this.parseLevel(this.level),this.Gameplay.enabled=!0,this.Win.enabled=!1,this.Lose.enabled=!1,this.End.enabled=!1,this.entity.sound.play("ambient")},Controller.prototype.parseLevel=function(t){var e=[];0<=t&&t<=4&&(this.CardControl.script.cardControl.setLevelText(t),this.CardControl.script.cardControl.reset(0),0===t&&(e=[1,0,1,1,1,0,0,0,0,0,0]),1===t&&(e=[0,1,1,1,1,0,0,0,0,0,0]),2===t&&(e=[0,0,1,1,1,0,0,1,0,0,0]),3===t&&(e=[0,0,1,1,1,0,0,0,1,0,0]),4===t&&(e=[0,0,1,1,1,0,0,0,0,0,1]),this.EntityCreator.script.entityCreator.reset(0,e)),5<=t&&t<=9&&(this.CardControl.script.cardControl.setLevelText(t),this.CardControl.script.cardControl.reset(1),5===t&&(e=[0,0,1,1,1,1,1,0,0,0,0]),6===t&&(e=[0,0,1,1,1,0,0,1,0,0,1]),7===t&&(e=[0,0,1,1,1,0,0,0,1,1,0]),8===t&&(e=[1,0,1,1,1,0,0,1,0,0,0]),9===t&&(e=[0,1,1,1,1,0,0,0,1,0,0]),this.EntityCreator.script.entityCreator.reset(1,e))},Controller.prototype.CheckDate=function(){this.level=0,Math.round((new Date).getTime()/1e3)-86400>=date1?(!0,this.level=localStorage.getItem("playerLevel")+1,localStorage.setItem("playerLevel",this.level+1,Math.round((new Date).getTime()/1e3))):this.level=localStorage.getItem("playerLevel")},Controller.prototype.showWin=function(t){for(i=0;i<this.winSprites.length;i++)this.winSprites[i].enabled=!1;this.winDialogue.enabled=!0,this.winSprites[this.currentLevel].enabled=!0},Controller.prototype.showWord=function(t){this.disableWinItems(),this.weekDialogue.enabled=!0;for(var e=0;e<this.progress.length;e++)this.progress[e]>0&&10!=this.progress[e]&&0;this.weekSprites[t].enabled=!0},Controller.prototype.disableWinItems=function(){for(i=0;i<this.winSprites.length;i++)this.winSprites[i].enabled=!1;this.winDialogue.enabled=!1,this.weekDialogue.enabled=!1};var ButtonState=pc.createScript("buttonState");ButtonState.attributes.add("defaultSprite",{type:"asset",assetType:"sprite"}),ButtonState.attributes.add("pressedSprite",{type:"asset",assetType:"sprite"}),ButtonState.attributes.add("target",{type:"entity"}),ButtonState.attributes.add("VideoEntity",{type:"entity"}),ButtonState.attributes.add("HideEntity",{type:"entity"}),ButtonState.attributes.add("HideVideoEntity",{type:"entity"}),ButtonState.attributes.add("entityCreatorPause",{type:"entity"}),ButtonState.attributes.add("entityCreatorPlay",{type:"entity"}),ButtonState.attributes.add("controller",{type:"entity"}),ButtonState.attributes.add("controllerClose",{type:"entity"}),ButtonState.attributes.add("controllerReset",{type:"entity"}),ButtonState.attributes.add("openVideo",{type:"boolean",default:!0}),ButtonState.attributes.add("shouldAnimate",{type:"boolean",default:!1}),ButtonState.attributes.add("LinktoHome",{type:"boolean",default:!1}),ButtonState.prototype.initialize=function(){this.pressed=!1,this.propName=this.entity.name.split(":")[1],this.entity.button.on("click",this._onClick,this)},ButtonState.prototype._onStateChange=function(t,e,i){this.entity.element.spriteAsset=e?this.defaultSprite:this.pressedSprite},ButtonState.prototype._onClick=function(){this.pressed=!this.pressed,this.LinktoHome?window.top.location.href="https://philipmorris.coreproc.dev/home":(this.VideoEntity&&this.VideoEntity.script.videoTexture.show(),this.HideEntity&&this.HideEntity.script.videoTexture.toggle(),this.HideVideoEntity&&this.HideVideoEntity.script.videoTexture.hide(),this.target&&(this.target.enabled?this.target.enabled=!1:(this.target.enabled=!0,this.shouldAnimate&&(this.target.setLocalScale(new pc.Vec3(0,0,0)),this.target.tween(this.target.getLocalScale()).to(new pc.Vec3(1,1,1),.3,pc.SineOut).start()))),this.entityCreatorPause&&(this.entityCreatorPause.script.entityCreator.isPlaying=!1),this.entityCreatorPlay&&(this.entityCreatorPlay.script.entityCreator.isPlaying=!0),this.controller&&this.controller.script.controller.openQuitMenu(this.openVideo),this.controllerClose&&this.controllerClose.script.controller.closeQuitMenu(),this.controllerReset&&this.controllerReset.script.controller.resetGame())};pc.script.create("cards",(function(t){var Cards=function(t){this.entity=t,this.cards=[],this.pairs=[],this.rotatingCards=[],this.rotationSpeed=220,this.clickedSets=[[]],this.totalFlips=0,this.time=1e5,this.countingTime=!1};return Cards.prototype={initialize:function(){},startLevel:function(){this.cards=t.root.find("name","card"),this.pairUp(),this.totalFlips=0},pairUp:function(){this.faces=this.entity.script.decks.getDeck().assets,this.cards=this.shuffle(this.cards),this.faces=this.shuffle(this.faces);for(var t=0;t<this.cards.length/2;t++)this.cards[t].findByName("Front").model.materialAsset=this.faces[t],this.cards[t+this.cards.length/2].findByName("Front").model.materialAsset=this.faces[t],this.pairs.push([t,t+this.cards.length/2])},shuffle:function(t){for(var i,s,e=t.length;0!==e;)s=Math.floor(Math.random()*e),i=t[e-=1],t[e]=t[s],t[s]=i;return t},update:function(t){this.countingTime&&(this.time+=t)},startCountingTime:function(){this.countingTime=!0,this.time=0},stopCountingTime:function(){this.countingTime=!1},flip:function(t,i,s,e){t>=0&&(i?(this.startTween(this.cards[t].getEulerAngles(),new pc.Vec3(0,0,180),this.cards[t],s,e),this.entity.audiosource.play("cardflip")):this.startTween(this.cards[t].getEulerAngles(),new pc.Vec3(0,0,0),this.cards[t],s,e))},startTween:function(t,i,s,e,c){var h=this,n=!0,r=!1;0===t.z&&(r=!0);new TWEEN.Tween({x:t.x,y:t.y,z:t.z}).to({x:i.x,y:i.y,z:i.z},750).easing(TWEEN.Easing.Back.Out).onUpdate((function(){this.z<90&&n&&!r&&(n=!1,e&&h.checkFlipped(),c&&h.clickedSets.shift()),s.setEulerAngles(this.x,this.y,this.z)})).onComplete((function(){n&&(e&&h.checkFlipped(),c&&h.clickedSets.shift())})).start()},numById:function(t){for(var i=0;i<this.cards.length;i++)if(0!==this.cards[i]&&this.cards[i].getGuid()===t)return i},notYetClicked:function(t){for(var i=0;i<this.clickedSets.length;i++)for(var s=0;s<this.clickedSets[i].length;s++)if(this.clickedSets[i][s]===t)return!1;return!0},clickCard:function(t){if(this.cards[t]&&this.notYetClicked(t)){var i=this.clickedSets[this.clickedSets.length-1];i&&1===i.length&&i[0]!==t?(this.clickedSets[this.clickedSets.length-1].push(t),this.flip(t,!0,!0)):i&&1===i.length||(i&&0===i.length?this.clickedSets[this.clickedSets.length-1].push(t):this.clickedSets.push([t]),this.flip(t,!0))}},checkFlipped:function(){this.totalFlips<1&&this.startCountingTime(),this.totalFlips++;for(var t=0;t<this.pairs.length;t++)if(this.pairs[t][0]===this.clickedSets[0][0]&&this.pairs[t][1]===this.clickedSets[0][1]||this.pairs[t][0]===this.clickedSets[0][1]&&this.pairs[t][1]===this.clickedSets[0][0])return this.matchingPair(),!0;this.clearClicked()},matchingPair:function(){(this.clickedSets[0][0]||this.clickedSets[0][1])&&(this.cards[this.clickedSets[0][0]].destroy(),this.cards[this.clickedSets[0][0]]=0,this.cards[this.clickedSets[0][1]].destroy(),this.cards[this.clickedSets[0][1]]=0,this.clickedSets.shift(),this.checkGameOver())},clearClicked:function(){this.flip(this.clickedSets[0][0],!1),this.flip(this.clickedSets[0][1],!1,!1,!0),this.entity.audiosource.play("cardflip")},checkGameOver:function(){for(var t=0;t<this.cards.length;t++)if(0!==this.cards[t])return!1;this.stopCountingTime(),this.endLevel()},endLevel:function(){var t=this.entity.script.states.getLevel(),i=this.entity.script.user.getScore(t),s=this.entity.script.user.getTime(t);(this.totalFlips<i||null===i||this.totalFlips===i&&this.time<s)&&this.entity.script.user.updateScore(t,this.totalFlips,this.time.toFixed(2)),this.cards=[],this.pairs=[],this.rotatingCards=[],this.clickedSets=[[]],this.entity.script.states.completeLevel(),this.entity.script.states.switchState(1),this.entity.audiosource.play("menuswoop"),this.totalFlips=0}},Cards}));pc.script.create("swoosh",(function(t){var Swoosh=function(t){this.entity=t,this.destroyAtTarget=!1};return Swoosh.prototype={initialize:function(){},update:function(t){TWEEN.update()},distance:function(t,e){return xd=e.x-t.x,yd=e.y-t.y,zd=e.z-t.z,Math.sqrt(xd*xd+yd*yd+zd*zd)},setTargetPos:function(t,e){e&&(this.destroyAtTarget=!0),this.startTween(this.entity.getPosition(),t)},startTween:function(t,e){var i=this;this.tween=new TWEEN.Tween({x:t.x,y:t.y,z:t.z}).to({x:e.x,y:e.y,z:e.z},1e3).easing(TWEEN.Easing.Back.Out).onUpdate((function(){i.entity.setLocalPosition(this.x,this.y,this.z),i.entity.rigidbody&&i.entity.rigidbody.syncEntityToBody()})).onComplete((function(){i.destroyAtTarget&&(TWEEN.remove(this.tween),i.entity.destroy())})).start()}},Swoosh}));var AnimateCurve=pc.createScript("animateCurve");AnimateCurve.attributes.add("offsetCurve",{type:"curve",title:"Offset Curve"}),AnimateCurve.attributes.add("duration",{type:"number",default:1,title:"Duration (secs)"}),AnimateCurve.prototype.initialize=function(){this.startScale=this.entity.getLocalScale().clone(),this.scale=new pc.Vec3,this.time=0},AnimateCurve.prototype.update=function(t){this.time+=t,this.time>this.duration&&(this.time-=this.duration);var e=this.time/this.duration,i=this.offsetCurve.value(e);this.scale.copy(this.startScale),this.scale.x+=i,this.scale.y+=i,this.scale.z+=i,this.entity.setLocalScale(this.scale)};var EntityCreator=pc.createScript("entityCreator");EntityCreator.attributes.add("pairCount",{type:"number",default:4}),EntityCreator.attributes.add("t",{type:"asset",assetType:"sprite"}),EntityCreator.attributes.add("pressedSprite",{type:"asset",assetType:"sprite",array:!0}),EntityCreator.attributes.add("backupSprite",{type:"asset",assetType:"sprite",array:!0}),EntityCreator.attributes.add("cardControl",{type:"entity"}),EntityCreator.attributes.add("timerText",{type:"entity"}),EntityCreator.attributes.add("levelText",{type:"entity"}),EntityCreator.attributes.add("LoseScreen",{type:"entity"}),EntityCreator.attributes.add("container",{type:"entity"}),EntityCreator.attributes.add("resetItems",{type:"entity"}),EntityCreator.attributes.add("CardControl",{type:"entity"}),EntityCreator.attributes.add("ContentBox",{type:"entity"}),EntityCreator.attributes.add("fillerTile",{type:"entity"}),EntityCreator.attributes.add("Points",{type:"entity"}),EntityCreator.attributes.add("shouldPlay",{type:"boolean",default:!1}),EntityCreator.attributes.add("Controller",{type:"entity"}),EntityCreator.attributes.add("SliderObject",{type:"entity"}),EntityCreator.attributes.add("dotArray",{type:"entity",array:!0}),EntityCreator.attributes.add("dotwhite",{type:"asset",assetType:"sprite"}),EntityCreator.attributes.add("dotorange",{type:"asset",assetType:"sprite"}),EntityCreator.attributes.add("isPlaying",{type:"boolean",default:!0}),EntityCreator.attributes.add("HintBtn",{type:"entity"}),EntityCreator.attributes.add("isFirstRun",{type:"boolean",default:!0}),EntityCreator.attributes.add("TextMatch",{type:"entity"}),EntityCreator.attributes.add("InstructionalBonus",{type:"entity"}),EntityCreator.prototype.initialize=function(){this.timer=60,this.entities=[],this.tempEntities=[],this.isbonuslevel=!1,this.pairCount=0,this.CardControl=this.app.root.findByName("CardControl"),console.log(this.pressedSprite),this.cardArray=[];for(var t=0;t<this.pressedSprite.length;t++)this.cardArray[t]=this.pressedSprite[t]},EntityCreator.prototype.getTime=function(){return this.timer},EntityCreator.prototype.parseLevel=function(t){var e,i=[];this.CardControl.script.cardControl.setLevelText(t),this.CardControl.script.cardControl.reset(0);return 0<=t&&t<=6&&(0===t&&(i=[1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),1===t&&(i=[0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),2===t&&(i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),3===t&&(i=[0,0,0,0,0,0,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),4===t&&(i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0]),5===t&&(i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,0,0,0,0,0,0]),6===t&&(i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1]),e=1,this.TextMatch.enabled=!0,this.InstructionalBonus.enabled=!1),7===t&&(this.isbonuslevel=!0,this.TextMatch.enabled=!1,this.InstructionalBonus.enabled=!0,7===t&&(i=[1,1,0,0,0,0,1,1,0,0,0,0,1,1,0,0,0,0,1,1,0,0,0,0,1,1,0,0,0,0,1,1,0,0,0,0,1,1,0,0,0,0],e=5)),25===t&&(i=[1,1,1,1,1,1,1,1,1,1,1,1],e=0),26===t&&(i=[1,1,1,1,0,0,0,0,0,0,0],e=0),27===t&&(i=[0,1,1,0,0,1,1,1,0,0,0],e=1),28===t&&(i=[1,0,1,1,0,0,0,1,1,1,0],e=2),[i,e,[60,60,60,60,60,60,60,60,55,50,45,40,80,75,70,65,60,55,50,90,80,75,70,60,80,60,60,60,60][t]]},EntityCreator.prototype.begin=function(t){this.timer=60,this.shouldPlay=!0,this.pairCount=this.pairCount+t-1;var e=this.parseLevel(parseInt(t));t<8&&(this.pairCount=e[1]+2),25===t&&(this.pairCount=e[1]+3),26===t&&(this.pairCount=e[1]+4),27===t&&(this.pairCount=e[1]+4),28===t&&(this.pairCount=e[1]+4),this.CardControl.script.cardControl.points=this.pairCount,this.CardControl.script.cardControl.leveltime=e[2],this.timerText.element.text=e[2],this.timer=e[2],this.create(e[0])},EntityCreator.prototype.reset=function(t,e){this.fillerTile&&this.fillerTile.destroy(),this.pressedSprite=this.backupSprite;for(var i=this.entities.length,r=0;r<i;r++)this.entities[r].entity.destroy();this.timerText.element.text=0,this.timer=0,this.shouldPlay=!1,this.entities=[],this.tempEntities=[],this.pairCount=t+4},EntityCreator.prototype.destroy=function(){for(var t=this.entities.length,e=0;e<t;e++)this.entities[e].entity.destroy()},EntityCreator.prototype.create=function(t){for(var e=this.cardArray,i=[],r=0;r<42;r++)1===t[r]&&i.push({sprite:this.pressedSprite[r]});var n=e;this.container.layoutgroup.enabled=!0;n.sort((function(){return.5-Math.random()})),n.length;for(var s=[],a=0;a<i.length;a++)s.push({sprite:i[a].sprite});var o=s.sort((function(){return.5-Math.random()})),p=Math.ceil(o.length/3);if(2===this.pairCount){var h=new pc.Vec4(0,0,0,100);this.ContentBox.layoutgroup.padding=h}for(var d=0,l=0;l<2*this.pairCount;l++){this.spawnCube(s[s.length-1].sprite,d);if(d++,this.pairCount>=4&&p-1===l){var y=new pc.Entity;y.name="Filler",y.addComponent("element",{anchor:new pc.Vec4(.5,.5,.5,.5),pivot:new pc.Vec2(.5,.5),width:60,height:60,type:"group",rect:[0,0,1,1]}),6!=this.pairCount&&9!=this.pairCount&&12!=this.pairCount&&this.container.addChild(y),y.setLocalPosition(0,0,0),y.tags.add("filler"),this.fillerTile=y}s=o.slice(0,s.length-1)}this.container.layoutgroup.enabled=!1},EntityCreator.prototype.update=function(t){this.isPlaying&&(this.timer=!0===this.shouldPlay?this.timer-=t:this.timerText.element.text=this.timer=60),this.level>=25?this.timerText.element.text="BONUS!":this.timerText.element.text=Math.round(this.timer),this.timer<0&&(this.entity.sound.play("Done"),this.entity.sound.stop("Tiktok"),this.LoseScreen.enabled=!0,this.LoseScreen.setLocalScale(new pc.Vec3(0,0,0)),this.LoseScreen.tween(this.LoseScreen.getLocalScale()).to(new pc.Vec3(1,1,1),.3,pc.SineOut).start(),this.timer=60,this.shouldPlay=!1,this.Controller.sound.stop("ambient")),10===Math.round(this.timer)&&this.entity.sound.play("Tiktok");for(var e=this.SliderObject.scrollbar.value,i=[],r=0;r<this.dotArray.length;r++)this.dotArray[r].enabled&&i.push({entity:this.dotArray});for(var n=1/i.length,s=0,a=0;a<i.length;a++){var o=s,p=s+=n;o<=e.toFixed(2)&&e.toFixed(2)<=p?this.dotArray[a].element.spriteAsset=this.dotorange:this.dotArray[a].element.spriteAsset=this.dotwhite}},EntityCreator.prototype.spawnCube=function(t,e){var i=new pc.Entity;i.name="TILE"+Math.round(pc.math.random(0,100)),this.isbonuslevel?i.addComponent("element",{anchor:new pc.Vec4(.5,.5,.5,.5),pivot:new pc.Vec2(.5,.5),width:100,height:150,type:"image",rect:[0,0,1,1],spriteAsset:this.t,useInput:!0}):i.addComponent("element",{anchor:new pc.Vec4(.5,.5,.5,.5),pivot:new pc.Vec2(.5,.5),width:180,height:260,type:"image",rect:[0,0,1,1],spriteAsset:this.t,useInput:!0}),i.addComponent("button"),i.addComponent("script"),i.script.create("cardItem",{attributes:{defaultSprite:this.t,pressedSprite:t,cardControl:this.cardControl}}),this.container.addChild(i),i.setLocalPosition(0,0,0),this.entities.push({entity:i,timer:pc.math.random(0,this.lifetime)}),this.tempEntities.push({entity:i,timer:pc.math.random(0,this.lifetime)});var r=new pc.Entity;return r.name=i.name+"_Back",i.addChild(r),r.setLocalPosition(140,0,0),r.setLocalRotation(180,0,180),this.isbonuslevel?i.addComponent("element",{anchor:new pc.Vec4(.5,.5,.5,.5),pivot:new pc.Vec2(.5,.5),width:100,height:150,type:"image",rect:[0,0,1,1],spriteAsset:this.t,useInput:!0}):r.addComponent("element",{anchor:new pc.Vec4(.5,.5,.5,.5),pivot:new pc.Vec2(.5,.5),width:180,height:260,type:"image",rect:[0,0,1,1],spriteAsset:this.t}),i},EntityCreator.prototype.spawnDot=function(t){var e=new pc.Entity;return e.name="TILE"+Math.round(pc.math.random(0,100)),e.addComponent("element",{anchor:new pc.Vec4(.5,.5,.5,.5),pivot:new pc.Vec2(.5,.5),width:140,height:200,type:"image",rect:[0,0,1,1],spriteAsset:this.t,useInput:!0}),e.addComponent("button"),e.addComponent("script"),e.script.create("cardItem",{attributes:{defaultSprite:this.t,pressedSprite:t,cardControl:this.cardControl}}),this.container.addChild(e),e.setLocalPosition(0,0,0),this.entities.push({entity:e,timer:pc.math.random(0,this.lifetime)}),e},EntityCreator.prototype.checkLoggedIn=function(t,e){var i=new XMLHttpRequest;i.open("GET",t),i.withCredentials=!0,i.addEventListener("load",(function(){e(JSON.parse(this.response))})),i.setRequestHeader("Accept","application/json"),i.send()};var CardControl=pc.createScript("cardControl");CardControl.attributes.add("points",{type:"number",default:4}),CardControl.attributes.add("shouldPress",{type:"boolean",default:!0}),CardControl.attributes.add("EndDialogue",{type:"entity"}),CardControl.attributes.add("WinScreen",{type:"entity"}),CardControl.attributes.add("WinFinal",{type:"entity"}),CardControl.attributes.add("WinBonus",{type:"entity"}),CardControl.attributes.add("EndScreen",{type:"entity"}),CardControl.attributes.add("levelText",{type:"entity"}),CardControl.attributes.add("entityCreator",{type:"entity"}),CardControl.attributes.add("UserSpice",{type:"number"}),CardControl.attributes.add("starsWon",{type:"entity"}),CardControl.attributes.add("StarManager1",{type:"entity"}),CardControl.attributes.add("StarManager2",{type:"entity"}),CardControl.attributes.add("StarManager3",{type:"entity"}),CardControl.attributes.add("StarManager4",{type:"entity"}),CardControl.attributes.add("LevelLabelText",{type:"entity"}),CardControl.attributes.add("BonusText",{type:"entity"}),CardControl.attributes.add("Letters",{type:"entity"}),CardControl.prototype.initialize=function(){Date.now();this.points=0,this.leveltime=0,this.Card1Text="",this.Card2Text=""},CardControl.prototype.update=function(t){this.wait&&Date.now()-this.timeStart>400&&(this.wait=!1,this.CheckCards())},CardControl.prototype.begin=function(t){},CardControl.prototype.reset=function(t){this.points=2+t,this.Card1=null,this.Card2=null},CardControl.prototype.setLevelText=function(t){this.levelText.element.text=t+1,this.LevelLabelText.enabled=!0,this.levelText.enabled=!0,this.BonusText.enabled=!1,25===t&&(this.BonusText.enabled=!0,this.LevelLabelText.enabled=!1,this.levelText.enabled=!1),26===t&&(this.BonusText.enabled=!0,this.LevelLabelText.enabled=!1,this.levelText.enabled=!1),27===t&&(this.BonusText.enabled=!0,this.LevelLabelText.enabled=!1,this.levelText.enabled=!1),28===t&&(this.BonusText.enabled=!0,this.LevelLabelText.enabled=!1,this.levelText.enabled=!1)},CardControl.prototype.updateText=function(){for(var t=this.Card1Text,e="",r=0;r<t.length;r++)"1"===t.charAt(r)?e+="_":e+=t.charAt(r);this.Letters.element.text=e},CardControl.prototype.appendText=function(){for(var t=this.Card2Text,e=this.Letters.element.text,r="",i=0;i<t.length;i++)"1"!==t.charAt(i)&&(r+=t.charAt(i));var a=0,n="";for(i=0;i<e.length;i++)"_"===e.charAt(i)?(n+=r.charAt(a),a++):n+=e.charAt(i);this.Letters.element.text=n},CardControl.prototype.setSelected=function(t){if(this.entity.sound.play("Click"),!this.Card1)return this.Card1=t,this.Card1Text=this.Card1.script.cardItem.characters,void this.updateText();this.Card2||(this.Card2=t,this.Card2Text=this.Card2.script.cardItem.characters,this.appendText()),this.shouldPress=!1,this.wait=!0,this.timeStart=Date.now()},CardControl.prototype.CheckCards=function(){this.Card1.script.cardItem.ID===this.Card2.script.cardItem.ID?(this.Card1.button.enable=!1,this.Card2.button.enable=!1,this.Card1.script.cardItem.disableCard(),this.Card2.script.cardItem.disableCard(),this.Card1=null,this.Card2=null,this.entity.sound.play("Correct"),this.onCloseMenu()):(this.Letters.element.text="______",this.Card1.script.cardItem.resetCard(),this.Card2.script.cardItem.resetCard(),this.entity.sound.play("Wrong"),this.Card1=null,this.Card2=null),this.shouldPress=!0},CardControl.prototype.resetCheckCards=function(){this.Card1=null,this.Card2=null,this.Letters.element.text="_______"},CardControl.prototype.onCloseMenu=function(){if(this.points--,0===this.points){this.entityCreator.sound.stop("Tiktok"),this.Letters.element.text="_______";var t,e=this.leveltime-this.entityCreator.script.entityCreator.timer,r=0;0<=e&&e<=this.leveltime/3&&(t=(r=5)+" Stars!"),this.leveltime/3<e&&e<this.leveltime/2&&(t=(r=4)+" Stars!"),this.leveltime/2<e&&e<2*this.leveltime/3&&(t=(r=3)+" Stars!"),2*this.leveltime/3<e&&e<3*this.leveltime/4&&(t=(r=2)+" Stars!"),3*this.leveltime/4<e&&e<this.leveltime&&(t=(r=1)+" Star!"),this.starsWon.element.text=t;this.entity.sound.play("Win");var i=this.app.root.findByName("Controller"),a=i.script.controller.currentLevel;25==this.levelText.element.text?(i.script.controller.writeStatus(i.script.controller.currentLevel,r),this.WinFinal.enabled=!0,this.WinFinal.setLocalScale(new pc.Vec3(0,0,0)),this.WinFinal.tween(this.WinFinal.getLocalScale()).to(new pc.Vec3(1,1,1),.3,pc.SineOut).start(),this.WinScreen.enabled=!1,this.entityCreator.script.entityCreator.shouldPlay=!1):7===a?(7===a&&(this.StarManager1.enabled=!0,r=3),this.WinScreen.enabled=!1,this.WinFinal.enabled=!0,i.script.controller.writeStatus(i.script.controller.currentLevel,r),this.entityCreator.script.entityCreator.shouldPlay=!1):(i.script.controller.writeStatus(i.script.controller.currentLevel,r),this.WinScreen.enabled=!0,this.WinFinal.enabled=!1,this.entityCreator.script.entityCreator.shouldPlay=!1)}},CardControl.prototype.checkLoggedIn=function(t,e){var r=new XMLHttpRequest;r.open("GET",t),r.withCredentials=!0,r.addEventListener("load",(function(){e(JSON.parse(this.response))})),r.setRequestHeader("Accept","application/json"),r.send()},CardControl.prototype.addCoins=function(t,e,r){var i=new XMLHttpRequest;i.open("POST",t),i.addEventListener("loadPart",(function(){e(this.status)})),i.setRequestHeader("Accept","application/json"),i.send(JSON.stringify(r))};var CardItem=pc.createScript("cardItem");CardItem.attributes.add("defaultSprite",{type:"asset",assetType:"sprite"}),CardItem.attributes.add("pressedSprite",{type:"asset",assetType:"sprite"}),CardItem.attributes.add("dialogue",{type:"entity"}),CardItem.attributes.add("ID",{type:"string"}),CardItem.attributes.add("characters",{type:"string"}),CardItem.attributes.add("cardControl",{type:"entity"}),CardItem.attributes.add("didPress",{type:"boolean",default:!1}),CardItem.prototype.initialize=function(){this.entity.button.on("click",this._onClick,this),this.pressed=!1,this.ID=this.pressedSprite.name.charAt(0)+this.pressedSprite.name.charAt(1);try{this.characters=this.pressedSprite.name.split("_").pop()}catch(t){console.log(t)}},CardItem.prototype.update=function(t){},CardItem.prototype._onClick=function(){this.cardControl.script.cardControl.shouldPress&&(this.entity.tween(this.entity.getLocalScale()).to(new pc.Vec3(1.1,1.1,1.1),.3,pc.SineOut).start(),this.didPress?(this.entity.element.spriteAsset=this.defaultSprite,this.pressed=!1,this.cardControl.script.cardControl.resetCheckCards(),this.didPress=!1,this.entity.tween(this.entity.getLocalScale()).to(new pc.Vec3(1,1,1),.3,pc.SineOut).start()):(this.cardControl.script.cardControl.shouldPress&&(this.pressed?(this.entity.element.spriteAsset=this.defaultSprite,this.pressed=!1):(this.entity.element.spriteAsset=this.pressedSprite,this.pressed=!0,this.cardControl.script.cardControl.setSelected(this.entity))),this.didPress=!0))},CardItem.prototype.showDialogue=function(){},CardItem.prototype.resetCard=function(){this.entity.element.spriteAsset=this.defaultSprite,this.pressed=!1,this.entity.button.enabled=!0,this.didPress=!1,this.entity.tween(this.entity.getLocalScale()).to(new pc.Vec3(1,1,1),.3,pc.SineOut).start()},CardItem.prototype.disableCard=function(){this.entity.button.enabled=!1,this.entity.tween(this.entity.getLocalScale()).to(new pc.Vec3(1,1,1),.3,pc.SineOut).start(),this.entity.tween(this.entity.getLocalRotation()).rotate(new pc.Vec3(0,0,5),.1,pc.SineOut).yoyo(!0).repeat(2).start()};pc.script.createLoadingScreen((function(e){var t,a;t=["body {","    background-color: #ffffff;","}","#application-splash-wrapper {","    position: absolute;","    top: 0;","    left: 0;","    height: 100%;","    width: 100%;","    background-color:  #085495;","}","#application-splash {","    position: absolute;","    top: calc(50% - 40px);","    width: 264px;","    left: calc(50% - 132px);","}","#application-splash img {","    width: 100%;","}","#progress-bar-container {","    margin: 20px auto 0 auto;","    height: 2px;","    width: 100%;","    background-color: #1d292c;","}","#progress-bar {","    width: 0%;","    height: 100%;","    background-color: #ffffff;","}","@media (max-width: 480px) {","    #application-splash {","        width: 170px;","        left: calc(50% - 85px);","    }","}"].join("\n"),(a=document.createElement("style")).type="text/css",a.styleSheet?a.styleSheet.cssText=t:a.appendChild(document.createTextNode(t)),document.head.appendChild(a),function(){var e=document.createElement("div");e.id="application-splash-wrapper",document.body.appendChild(e);var t=document.createElement("div");t.id="application-splash",e.appendChild(t),t.style.display="none";var a=document.createElement("img");a.src="https://res.cloudinary.com/aqube/image/upload/v1618701616/PMFTC%20Fortune/Fortune_Logo_cfzwbx.png",t.appendChild(a),a.onload=function(){t.style.display="block"};var o=document.createElement("div");o.id="progress-bar-container",t.appendChild(o);var n=document.createElement("div");n.id="progress-bar",o.appendChild(n)}(),e.on("preload:end",(function(){e.off("preload:progress")})),e.on("preload:progress",(function(e){var t=document.getElementById("progress-bar");t&&(e=Math.min(1,Math.max(0,e)),t.style.width=100*e+"%")})),e.on("start",(function(){var e=document.getElementById("application-splash-wrapper");e.parentElement.removeChild(e)}))}));pc.extend(pc,function(){var TweenManager=function(t){this._app=t,this._tweens=[],this._add=[]};TweenManager.prototype={add:function(t){return this._add.push(t),t},update:function(t){for(var i=0,e=this._tweens.length;i<e;)this._tweens[i].update(t)?i++:(this._tweens.splice(i,1),e--);this._add.length&&(this._tweens=this._tweens.concat(this._add),this._add.length=0)}};var Tween=function(t,i,e){pc.events.attach(this),this.manager=i,e&&(this.entity=null),this.time=0,this.complete=!1,this.playing=!1,this.stopped=!0,this.pending=!1,this.target=t,this.duration=0,this._currentDelay=0,this.timeScale=1,this._reverse=!1,this._delay=0,this._yoyo=!1,this._count=0,this._numRepeats=0,this._repeatDelay=0,this._from=!1,this._slerp=!1,this._fromQuat=new pc.Quat,this._toQuat=new pc.Quat,this._quat=new pc.Quat,this.easing=pc.EASE_LINEAR,this._sv={},this._ev={}};Tween.prototype={to:function(t,i,e,s,n,r){return t instanceof pc.Vec3?this._properties={x:t.x,y:t.y,z:t.z}:t instanceof pc.Color?(this._properties={r:t.r,g:t.g,b:t.b},void 0!==t.a&&(this._properties.a=t.a)):this._properties=t,this.duration=i,e&&(this.easing=e),s&&this.delay(s),n&&this.repeat(n),r&&this.yoyo(r),this},from:function(t,i,e,s,n,r){return t instanceof pc.Vec3?this._properties={x:t.x,y:t.y,z:t.z}:t instanceof pc.Color?(this._properties={r:t.r,g:t.g,b:t.b},void 0!==t.a&&(this._properties.a=t.a)):this._properties=t,this.duration=i,e&&(this.easing=e),s&&this.delay(s),n&&this.repeat(n),r&&this.yoyo(r),this._from=!0,this},rotate:function(t,i,e,s,n,r){return t instanceof pc.Quat?this._properties={x:t.x,y:t.y,z:t.z,w:t.w}:t instanceof pc.Vec3?this._properties={x:t.x,y:t.y,z:t.z}:t instanceof pc.Color?(this._properties={r:t.r,g:t.g,b:t.b},void 0!==t.a&&(this._properties.a=t.a)):this._properties=t,this.duration=i,e&&(this.easing=e),s&&this.delay(s),n&&this.repeat(n),r&&this.yoyo(r),this._slerp=!0,this},start:function(){if(this.playing=!0,this.complete=!1,this.stopped=!1,this._count=0,this.pending=this._delay>0,this._reverse&&!this.pending?this.time=this.duration:this.time=0,this._from){for(var t in this._properties)this._sv[t]=this._properties[t],this._ev[t]=this.target[t];if(this._slerp){this._toQuat.setFromEulerAngles(this.target.x,this.target.y,this.target.z);var i=void 0!==this._properties.x?this._properties.x:this.target.x,e=void 0!==this._properties.y?this._properties.y:this.target.y,s=void 0!==this._properties.z?this._properties.z:this.target.z;this._fromQuat.setFromEulerAngles(i,e,s)}}else{for(var t in this._properties)this._sv[t]=this.target[t],this._ev[t]=this._properties[t];if(this._slerp){this._fromQuat.setFromEulerAngles(this.target.x,this.target.y,this.target.z);i=void 0!==this._properties.x?this._properties.x:this.target.x,e=void 0!==this._properties.y?this._properties.y:this.target.y,s=void 0!==this._properties.z?this._properties.z:this.target.z;this._toQuat.setFromEulerAngles(i,e,s)}}return this._currentDelay=this._delay,this.manager.add(this),this},pause:function(){this.playing=!1},resume:function(){this.playing=!0},stop:function(){this.playing=!1,this.stopped=!0},delay:function(t){return this._delay=t,this.pending=!0,this},repeat:function(t,i){return this._count=0,this._numRepeats=t,this._repeatDelay=i||0,this},loop:function(t){return t?(this._count=0,this._numRepeats=1/0):this._numRepeats=0,this},yoyo:function(t){return this._yoyo=t,this},reverse:function(){return this._reverse=!this._reverse,this},chain:function(){for(var t=arguments.length;t--;)t>0?arguments[t-1]._chained=arguments[t]:this._chained=arguments[t];return this},update:function(t){if(this.stopped)return!1;if(!this.playing)return!0;if(!this._reverse||this.pending?this.time+=t*this.timeScale:this.time-=t*this.timeScale,this.pending){if(!(this.time>this._currentDelay))return!0;this._reverse?this.time=this.duration-(this.time-this._currentDelay):this.time=this.time-this._currentDelay,this.pending=!1}var i=0;(!this._reverse&&this.time>this.duration||this._reverse&&this.time<0)&&(this._count++,this.complete=!0,this.playing=!1,this._reverse?(i=this.duration-this.time,this.time=0):(i=this.time-this.duration,this.time=this.duration));var e,s,n=this.time/this.duration,r=this.easing(n);for(var h in this._properties)e=this._sv[h],s=this._ev[h],this.target[h]=e+(s-e)*r;if(this._slerp&&this._quat.slerp(this._fromQuat,this._toQuat,r),this.entity&&(this.entity._dirtify(!0),this.element&&this.entity.element&&(this.entity.element[this.element]=this.target),this._slerp&&this.entity.setLocalRotation(this._quat)),this.fire("update",t),this.complete){var a=this._repeat(i);return a?this.fire("loop"):(this.fire("complete",i),this._chained&&this._chained.start()),a}return!0},_repeat:function(t){if(this._count<this._numRepeats){if(this._reverse?this.time=this.duration-t:this.time=t,this.complete=!1,this.playing=!0,this._currentDelay=this._repeatDelay,this.pending=!0,this._yoyo){for(var i in this._properties)tmp=this._sv[i],this._sv[i]=this._ev[i],this._ev[i]=tmp;this._slerp&&(this._quat.copy(this._fromQuat),this._fromQuat.copy(this._toQuat),this._toQuat.copy(this._quat))}return!0}return!1}};var BounceIn=function(t){return 1-BounceOut(1-t)},BounceOut=function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375};return{TweenManager:TweenManager,Tween:Tween,Linear:function(t){return t},QuadraticIn:function(t){return t*t},QuadraticOut:function(t){return t*(2-t)},QuadraticInOut:function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)},CubicIn:function(t){return t*t*t},CubicOut:function(t){return--t*t*t+1},CubicInOut:function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)},QuarticIn:function(t){return t*t*t*t},QuarticOut:function(t){return 1- --t*t*t*t},QuarticInOut:function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)},QuinticIn:function(t){return t*t*t*t*t},QuinticOut:function(t){return--t*t*t*t*t+1},QuinticInOut:function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)},SineIn:function(t){return 0===t?0:1===t?1:1-Math.cos(t*Math.PI/2)},SineOut:function(t){return 0===t?0:1===t?1:Math.sin(t*Math.PI/2)},SineInOut:function(t){return 0===t?0:1===t?1:.5*(1-Math.cos(Math.PI*t))},ExponentialIn:function(t){return 0===t?0:Math.pow(1024,t-1)},ExponentialOut:function(t){return 1===t?1:1-Math.pow(2,-10*t)},ExponentialInOut:function(t){return 0===t?0:1===t?1:(t*=2)<1?.5*Math.pow(1024,t-1):.5*(2-Math.pow(2,-10*(t-1)))},CircularIn:function(t){return 1-Math.sqrt(1-t*t)},CircularOut:function(t){return Math.sqrt(1- --t*t)},CircularInOut:function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)},BackIn:function(t){var i=1.70158;return t*t*((i+1)*t-i)},BackOut:function(t){var i=1.70158;return--t*t*((i+1)*t+i)+1},BackInOut:function(t){var i=2.5949095;return(t*=2)<1?t*t*((i+1)*t-i)*.5:.5*((t-=2)*t*((i+1)*t+i)+2)},BounceIn:BounceIn,BounceOut:BounceOut,BounceInOut:function(t){return t<.5?.5*BounceIn(2*t):.5*BounceOut(2*t-1)+.5},ElasticIn:function(t){var i,e=.1;return 0===t?0:1===t?1:(!e||e<1?(e=1,i=.1):i=.4*Math.asin(1/e)/(2*Math.PI),-e*Math.pow(2,10*(t-=1))*Math.sin((t-i)*(2*Math.PI)/.4))},ElasticOut:function(t){var i,e=.1;return 0===t?0:1===t?1:(!e||e<1?(e=1,i=.1):i=.4*Math.asin(1/e)/(2*Math.PI),e*Math.pow(2,-10*t)*Math.sin((t-i)*(2*Math.PI)/.4)+1)},ElasticInOut:function(t){var i,e=.1,s=.4;return 0===t?0:1===t?1:(!e||e<1?(e=1,i=.1):i=s*Math.asin(1/e)/(2*Math.PI),(t*=2)<1?e*Math.pow(2,10*(t-=1))*Math.sin((t-i)*(2*Math.PI)/s)*-.5:e*Math.pow(2,-10*(t-=1))*Math.sin((t-i)*(2*Math.PI)/s)*.5+1)}}}()),function(){var t=pc.Application.getApplication();t&&(t._tweenManager=new pc.TweenManager(t),t.on("update",(function(i){t._tweenManager.update(i)})),pc.Application.prototype.tween=function(t){return new pc.Tween(t,this._tweenManager)},pc.Entity.prototype.tween=function(t,i){var e=this._app.tween(t);return e.entity=this,this.on("destroy",(function(){e.stop()})),i&&i.element&&(e.element=element),e})}();var StartCount=pc.createScript("startCount");StartCount.attributes.add("One",{type:"entity"}),StartCount.attributes.add("Two",{type:"entity"}),StartCount.attributes.add("Three",{type:"entity"}),StartCount.attributes.add("Start",{type:"entity"}),StartCount.attributes.add("timerText",{type:"entity"}),StartCount.attributes.add("Sprite",{type:"asset",assetType:"sprite"}),StartCount.attributes.add("CountDown",{type:"entity"}),StartCount.attributes.add("Instructional",{type:"entity"}),StartCount.attributes.add("Title",{type:"entity"}),StartCount.attributes.add("Controller",{type:"entity"}),StartCount.attributes.add("ActivateCountButton",{type:"entity"}),StartCount.prototype.initialize=function(){this.timer=3,this.ActivateCountButton.button.on("click",this.startGame,this),this.startGame(),this.MenuContainer=this.app.root.findByName("MenuContainer")},StartCount.prototype.startGame=function(t){this.Instructional.enabled=!1,this.Title.enabled=!1,this.Three.enabled=!0},StartCount.prototype.update=function(t){this.timer-=t,this.timerText.element.text=Math.round(this.timer);var e=Math.round(this.timer);3===e&&(this.Three.enabled=!0,this.Two.enabled=!1,this.One.enabled=!1,this.Start.enabled=!1),2===e&&(this.Three.enabled=!1,this.Two.enabled=!0),1===e&&(this.Two.enabled=!1,this.One.enabled=!0),e<=0&&(this.One.enabled=!1,this.Start.enabled=!0),-1==e&&(this.Start.enabled=!1,this.CountDown.enabled=!1,this.Instructional.enabled=!1,this.Controller.script.controller._onClick(this.Controller.script.controller.currentLevel),this.timer=4)};var TvScreen=pc.createScript("tvScreen");TvScreen.attributes.add("screenMaterial",{title:"Screen Material",description:"The screen material of the TV that displays the video texture.",type:"asset",assetType:"material"}),TvScreen.attributes.add("playEvent",{title:"Play Event",description:"Set the TV screen material emissive map on this event.",type:"string",default:""}),TvScreen.prototype.initialize=function(){this.app.on(this.playEvent,(function(e){var t=this.screenMaterial.resource;t.emissiveMap=e,t.update()}),this)};var VideoTexture=pc.createScript("videoTexture");VideoTexture.attributes.add("video",{title:"Video",description:"MP4 video asset to play back on this video texture.",type:"asset"}),VideoTexture.attributes.add("playEvent",{title:"Play Event",description:"Event that is fired as soon as the video texture is ready to play.",type:"string",default:""}),VideoTexture.attributes.add("ButtonPlay",{type:"entity"}),VideoTexture.attributes.add("target",{type:"entity"}),VideoTexture.attributes.add("toggleState",{type:"boolean",default:!0}),VideoTexture.prototype.initialize=function(){this.ButtonPlay.button.on("click",this._onClick,this),this.isPlaying=!1;var t=this.app,e=document.createElement("video");e.autoplay=!0,e.crossOrigin="anonymous",e.loop=!0,e.muted=!0,e.playsInline=!0,e.src=this.video.getFileUrl(),e.className="pm-video";var i=e.style;i.width="83%",i.height="100%",i.position="absolute",i.margin="auto",i.left="0",i.right="0",i.opacity="0",i.zIndex="1",i.pointerEvents="none",document.body.appendChild(e),this.videoTexture=new pc.Texture(t.graphicsDevice,{format:pc.PIXELFORMAT_R8_G8_B8,minFilter:pc.FILTER_LINEAR_MIPMAP_LINEAR,magFilter:pc.FILTER_LINEAR,addressU:pc.ADDRESS_CLAMP_TO_EDGE,addressV:pc.ADDRESS_CLAMP_TO_EDGE,mipmaps:!0,autoMipmap:!0}),this.videoTexture.setSource(e),e.addEventListener("canplay",function(e){t.fire(this.playEvent,this.videoTexture)}.bind(this));this.target,this.entity;e.addEventListener("ended",(function(t){})),this.videoDom=e},VideoTexture.prototype.update=function(t){this.videoTexture.upload()},VideoTexture.prototype._onClick=function(){this.app.fire(this.playEvent,this.videoTexture)},VideoTexture.prototype._onClick=function(){this.videoDom.muted=!1,this.videoDom.currentTime=0},VideoTexture.prototype.stop=function(){this.videoDom.pause()},VideoTexture.prototype.show=function(){var t=this.videoDom.style;this.videoDom.currentTime=0,t.opacity="1"},VideoTexture.prototype.hide=function(){this.videoDom.style.opacity="0"},VideoTexture.prototype.toggle=function(){var t=this.videoDom.style;this.toggleState?(t.opacity="1",this.toggleState=!1):(this.videoDom.currentTime=0,t.opacity="0",this.toggleState=!0)},VideoTexture.prototype.postInitialize=function(){this.app.fire("video:playing"),this.app.on("video:play-material",(function(){this.videoDom.play(),this.app.fire("video:playing")}),this),this.app.on("video:play-pause-toggle",(function(){this.videoDom.paused?(this.videoDom.play(),this.app.fire("video:playing")):(this.videoDom.pause(),this.app.fire("video:paused"))}),this)};var Button=pc.createScript("button");Button.attributes.add("type",{type:"string",default:"null"}),Button.attributes.add("isEnabled",{type:"boolean",default:!0}),Button.attributes.add("isStartLevel",{type:"boolean",default:!1}),Button.attributes.add("SimpleOpen",{type:"entity"}),Button.attributes.add("SimpleClose",{type:"entity"}),Button.attributes.add("SimpleCloseArray",{type:"entity",array:!0}),Button.attributes.add("Reset",{type:"boolean",default:!1}),Button.attributes.add("ResetPoints",{type:"boolean",default:!1}),Button.attributes.add("VideoEntity",{type:"entity"}),Button.attributes.add("winScreenID",{type:"boolean",default:!1}),Button.attributes.add("weekScreenID",{type:"boolean",default:!1}),Button.attributes.add("Mute",{type:"boolean",default:!1}),Button.prototype.initialize=function(){this.MenuManager=this.app.root.findByName("MenuContainer"),this.entity.button.on("click",this.onClick,this),this.isMute=!1},Button.prototype.onClick=function(t){if(this.isEnabled){if(this.Mute)return void(this.isMute?(this.app.systems.sound.volume=1,this.isMute=!1):(this.app.systems.sound.volume=0,this.isMute=!0));var e=this.app.root.findByName("Controller").script.controller;if(this.winScreenID)return void e.showWin();if(this.weekScreenID)return void e.showWord();if(this.ResetPoints)return void e.resetGamePoints();if(this.VideoEntity&&this.VideoEntity.script.videoTexture.toggle(),"null"!==this.type&&this.MenuManager.script.menuManager.OpenDialogue(this.type),this.isStartLevel&&this.MenuManager.script.menuManager.CloseDialogue(),this.Reset&&e.resetGame(),this.SimpleOpen&&(this.SimpleOpen.enabled=!0),this.SimpleClose){if(this.SimpleClose.enabled=!1,this.SimpleCloseArray.length>0)for(var i=0;i<this.SimpleCloseArray.length;i++)this.SimpleCloseArray[i].enabled=!1;return}}};var MenuManager=pc.createScript("menuManager");MenuManager.attributes.add("Dialogue",{type:"entity"}),MenuManager.attributes.add("DialogueBonus",{type:"entity"}),MenuManager.attributes.add("DialogueBonusStart",{type:"entity"}),MenuManager.attributes.add("DialogueClaimed",{type:"entity"}),MenuManager.attributes.add("DialogueClaimedBonus",{type:"entity"}),MenuManager.attributes.add("DialogueClaimedBonusStars1",{type:"entity"}),MenuManager.attributes.add("DialogueClaimedBonusStars2",{type:"entity"}),MenuManager.attributes.add("DialogueClaimedBonusStars3",{type:"entity"}),MenuManager.attributes.add("DialogueClaimedBonusStars4",{type:"entity"}),MenuManager.attributes.add("DialogueRaffle",{type:"entity"}),MenuManager.attributes.add("BonusSprite",{type:"entity"}),MenuManager.attributes.add("BonusSprite1",{type:"asset",assetType:"sprite"}),MenuManager.attributes.add("BonusSprite2",{type:"asset",assetType:"sprite"}),MenuManager.attributes.add("BonusSprite3",{type:"asset",assetType:"sprite"}),MenuManager.attributes.add("BonusSprite4",{type:"asset",assetType:"sprite"}),MenuManager.attributes.add("instructionSprites",{type:"asset",assetType:"sprite",array:!0}),MenuManager.attributes.add("instructionEntity",{type:"entity"}),MenuManager.attributes.add("Label",{type:"entity"}),MenuManager.attributes.add("Stars",{type:"entity"}),MenuManager.attributes.add("Destination",{type:"entity"}),MenuManager.attributes.add("Countdown",{type:"entity"}),MenuManager.attributes.add("Menu",{type:"entity"}),MenuManager.attributes.add("StarManager",{type:"entity"}),MenuManager.attributes.add("StarManagerClaimed",{type:"entity"}),MenuManager.prototype.initialize=function(){this.Controller=this.app.root.findByName("Controller"),this.Gameplay=this.app.root.findByName("Gameplay"),this.LevelData=0,this.Dialogue.enabled=!1},MenuManager.prototype.update=function(e){},MenuManager.prototype.getLevelData=function(){return this.LevelData},MenuManager.prototype.OpenDialogue=function(e){var t=this.Controller.script.controller.getTileStatus(e-1);return t<=-1?(this.DialogueBonus.enabled=!1,this.Dialogue.enabled=!1,"26"===e?(this.DialogueClaimedBonus.enabled=!0,void(this.DialogueClaimedBonusStars1.enabled=!0)):(this.DialogueClaimed.enabled=!0,void this.StarManagerClaimed.script.tileState.refreshWithID(e))):e>=26?(10===t&&("26"===e&&(this.BonusSprite.element.spriteAsset=this.BonusSprite1),this.DialogueBonus.enabled=!0,this.Dialogue.enabled=!1),void(0===t&&(this.LevelData=e,this.DialogueBonusStart.enabled=!0))):(console.log(e),this.instructionEntity.element.spriteAsset=this.instructionSprites[e-1],void(t>0?(this.LevelData=e,e<8&&(this.Controller.script.controller.currentLevel=this.LevelData-1,this.Controller.script.controller.showWin(e-1))):(this.LevelData=e,this.Dialogue.enabled=!0,this.Controller.script.controller.currentLevel=this.LevelData-1,this.Label&&(this.Label.element.text="Level "+e),this.StarManager.script.tileState.refreshWithID(e))))},MenuManager.prototype.CloseDialogue=function(){this.Menu.enabled=!1,this.Controller.script.controller.currentLevel=this.LevelData-1,this.DialogueClaimedBonusStars1.enabled=!1,this.DialogueClaimedBonusStars2.enabled=!1,this.DialogueClaimedBonusStars3.enabled=!1,this.DialogueClaimedBonusStars4.enabled=!1};var AnimateUp=pc.createScript("animateUp");AnimateUp.attributes.add("SlideUp",{type:"boolean",default:!1}),AnimateUp.attributes.add("ScaleUp",{type:"boolean",default:!1}),AnimateUp.attributes.add("loop",{type:"boolean",default:!1}),AnimateUp.attributes.add("delay",{type:"number",default:.3}),AnimateUp.attributes.add("offset",{type:"number",default:-100}),AnimateUp.attributes.add("speed",{type:"number",default:.3}),AnimateUp.attributes.add("isAnimating",{type:"boolean",default:!0}),AnimateUp.prototype.initialize=function(){this.curpoint=new pc.Vec3(this.entity.getLocalPosition().x,this.entity.getLocalPosition().y,this.entity.getLocalPosition().z),this.on("state",this.onStateChanged,this),this.begin()},AnimateUp.prototype.update=function(t){},AnimateUp.prototype.begin=function(t){this.isAnimating=!0,this.SlideUp&&this.entity.setLocalPosition(this.entity.getLocalPosition().x,this.offset,this.entity.getLocalPosition().z),this.ScaleUp&&this.entity.setLocalScale(0,0,0),this.SlideUp||this.ScaleUp||(this.entity.element.opacity=0),this._timerHandle=pc.timer.add(this.delay,(function(){this.isAnimating=!0,this.SlideUp&&this.run(),this.ScaleUp&&this.scale(),this.SlideUp||this.ScaleUp||(this.entity.element.opacity=1)}),this)},AnimateUp.prototype.run=function(t){this.entity.tween(this.entity.getLocalPosition()).to(new pc.Vec3(this.entity.getLocalPosition().x,this.curpoint.y,0),this.speed,pc.SineOut).loop(this.loop).yoyo(this.loop).on("complete",this.isAnimating=!1).start()},AnimateUp.prototype.scale=function(t){this.entity.tween(this.entity.getLocalScale()).to(new pc.Vec3(1,1,1),this.speed,pc.SineOut).loop(this.loop).yoyo(this.loop).on("complete",this.isAnimating=!1).start()},AnimateUp.prototype.onStateChanged=function(t){t?this.begin():this.isAnimating=!1};!function(){var e={},c=0;pc.timer={},pc.timer.add=function(t,i,n){if(t>0){var a={};return a.id=c,e[c]={secsLeft:t,callback:i,scope:n},c+=1,a}return null},pc.timer.remove=function(c){c&&delete e[c.id]},pc.timer.update=function(c){for(var t in e){var i=e[t];i.secsLeft-=c,i.secsLeft<=0&&(i.callback.call(i.scope),delete e[t])}};var t=pc.Application.getApplication();t&&t.on("update",(function(e){pc.timer.update(e)}))}();var TileState=pc.createScript("tileState");TileState.attributes.add("enabledStateObject",{type:"asset",assetType:"sprite"}),TileState.attributes.add("lockedState",{type:"asset",assetType:"sprite"}),TileState.attributes.add("PointID",{type:"number",default:0}),TileState.attributes.add("starObjects",{type:"entity",array:!0}),TileState.attributes.add("nextMainTile",{type:"entity"}),TileState.attributes.add("StarOnState",{type:"asset",assetType:"sprite"}),TileState.attributes.add("StarOffState",{type:"asset",assetType:"sprite"}),TileState.attributes.add("isPopup",{type:"boolean",default:!1}),TileState.prototype.initialize=function(){this.refresh()},TileState.prototype.refresh=function(){var t,e,s=this.app.root.findByName("Controller").script.controller,i=s.getTileStatus(this.PointID);if(i>101){for(this.entity.element.spriteAsset=this.lockedState,t=this.starObjects.length,e=0;e<t;e++)this.starObjects[e].enabled=!1;25===this.PointID||26===this.PointID||27===this.PointID||28===this.PointID?this.entity.button.enabled=!0:this.entity.button.enabled=!1}else if(100!==this.PointID)if(10!==i)if(0!==i)if(i<=-1)if(-10!==i){this.entity.button&&(this.entity.button.enabled=!0),this.entity.element.spriteAsset=this.enabledStateObject,t=this.starObjects.length;var a=-parseInt(i);for(e=0;e<t;e++)this.starObjects[e].enabled=!0,this.starObjects[e].element.spriteAsset=a>0?this.StarOnState:this.StarOffState,a--}else for(this.entity.element.spriteAsset=this.enabledStateObject,this.entity.button&&(this.entity.button.enabled=!0),t=this.starObjects.length,e=0;e<t;e++)this.starObjects[e].enabled=!0,this.starObjects[e].element.spriteAsset=this.StarOffState;else for(this.entity.button&&(this.entity.button.enabled=!0),this.entity.element.spriteAsset=this.enabledStateObject,t=this.starObjects.length,e=0;e<t;e++)this.starObjects[e].enabled=!0,this.starObjects[e].element.spriteAsset=i>0?this.StarOnState:this.StarOffState,i--;else for(this.entity.button&&(this.entity.button.enabled=!0),this.entity.element.spriteAsset=this.enabledStateObject,t=this.starObjects.length,e=0;e<t;e++)this.starObjects[e].enabled=!0,this.starObjects[e].element.spriteAsset=this.StarOffState;else{for(this.entity.element.spriteAsset=this.lockedState,t=this.starObjects.length,e=0;e<t;e++)this.starObjects[e].enabled=!1;25===this.PointID||26===this.PointID||27===this.PointID||28===this.PointID?this.entity.button.enabled=!0:this.entity.button.enabled=!1}else{var n=s.getTileStatus(24);10!==n&&0!==n?(this.entity.element.spriteAsset=this.enabledStateObject,this.entity.button.enabled=!0):(this.entity.element.spriteAsset=this.lockedState,this.entity.button.enabled=!1)}},TileState.prototype.refreshWithID=function(t){var e,s,i=this.app.root.findByName("Controller").script.controller,a=i.getTileStatus(t-1);if(100!==t)if(a<=-1)if(-10!==a){var n=-parseInt(a);for(e=this.starObjects.length,s=0;s<e;s++)this.starObjects[s].enabled=!0,this.starObjects[s].element.spriteAsset=n>0?this.StarOnState:this.StarOffState,n--}else for(this.entity.element.spriteAsset=this.enabledStateObject,this.entity.button&&(this.entity.button.enabled=!0),e=this.starObjects.length,s=0;s<e;s++)this.starObjects[s].enabled=!0,this.starObjects[s].element.spriteAsset=this.StarOffState;else for(e=this.starObjects.length,s=0;s<e;s++)this.starObjects[s].enabled=!0,this.starObjects[s].element.spriteAsset=a>0?this.StarOnState:this.StarOffState,a--;else{var r=i.getTileStatus(24);10!==r&&0!==r?(this.entity.element.spriteAsset=this.enabledStateObject,this.entity.button.enabled=!0):(this.entity.element.spriteAsset=this.lockedState,this.entity.button.enabled=!1)}},TileState.prototype.toggle=function(t){this.refresh()};